<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>リアルタイム更新 - 三国志NET KMY Version Documentation</title>
  <link rel="stylesheet" type="text/css" media="screen" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="index.css" />
</head>
<body>

<header>
  <div id="site-title">
    三国志NET KMY Version Documentation
  </div>
</header>

<!--
-->

<div class="container-fluid">
  <div class="row">
    <div class="col-lg-8 offset-lg-2 col-md-12 offset-md-0">

      <div id="category-group" class="category-pick category-pick-1">
        <div class="category category-1">リアルタイム更新</div>
      </div>

      <div id="category-nav-group" class="category-menu category-menu-picked-1">
        <a class="category-menu-item category-1" href="index.html">基本</a>
        <a class="category-menu-item category-2" href="index.html">内政</a>
        <a class="category-menu-item category-3" href="index.html">対外</a>
        <a class="category-menu-item category-4" href="index.html">その他</a>
      </div>

      <div id="article" class="theme-1">
        <h2 id="概要">概要</h2>
        <p>通常の三国志NETは、最新の情報を表示するために、ページをリロードする必要があります。これは、ステータス画面のUPDATEボタンを押す、またはF5キーを押すことにより、手動で行う必要があります。<br />
        三国志NET KMY Versionでは、画面を放置していても、情報が自動で更新されます。誰かが手紙を投稿すると、その手紙があなたの画面にも即座に表示されます。あなたが行動するとその結果が武将ログに追加され、内政した場合は都市情報が最新になり、戦争した場合はマップログ、都市支配した場合は地図が更新されます。<br />
        手動で画面を更新する必要は基本的に発生しません。ながら作業などにお使いいただけます。</p>
        <h2 id="手動での更新が必要な場合">手動での更新が必要な場合</h2>
        <ul>
        <li>画面側のプログラムをアップデートした場合</li>
        <li>管理者がデータを直接書き換えた場合</li>
        <li>その他、管理者の指示のあった場合</li>
        <li>武将自身が、ゲームデータが本当は最新になっていないのでは？と疑いを持った場合</li>
        <li>別の端末でログインしてしまった場合
        <ul>
        <li>一度に１つの端末からしかログインできないようになっています。別の端末からログインすると、もともとログインしていた端末はリアルタイム更新が止まります</li>
        <li>この場合は、使わない端末のブラウザタブを閉じる、ブラウザを閉じるなどしてから、使う端末の画面を更新してください</li>
        </ul></li>
        <li>画面の動きが重くなった場合</li>
        </ul>
        <h2 id="リアルタイム更新と負荷">リアルタイム更新と負荷</h2>
        <p>結論から言いますと、リアルタイム更新によってサーバやブラウザに過度の負荷がかかることはありません。ただし、画面を長時間表示していると、手紙やマップログなどの情報が大量に蓄積されますため、画面の動きが重くなる場合があります。その場合はページの更新が必要になります。</p>
        <h3 id="技術的に言うと">技術的に言うと</h3>
        <p>今までの三国志NETは、画面を手動で更新していました。ブラウザを使う人が更新したいタイミングで更新することで最新の情報を得ることは、ポーリング（polling）という手法に近いものです。<br />
        三国志NET KMY Versionでは、push通信という、サーバ側から画面に信号を送る手法の１つを採用しています。</p>
        <p>従来は、情報が更新されたかどうかも分からない状態で画面を更新していたため、画面を更新しても情報が全く更新されておらず結果的にサーバに不要な負荷がかかった、ということも頻繁に発生します。<br />
        対して、今回は一度画面を表示しておけば、情報が更新された場合に限りサーバが勝手に情報を送ってきてくれます。必要な時に必要な情報だけがネット回線に乗ることになりますので、画面を見るユーザ側は、表示された情報を見て判断するという、画面更新の操作をすっとばして必要最低限のことをしていればよく、それだけサーバのCPU負荷も下がります。</p>
        <p>画面の表示がおかしい、古い情報が更新されていないのではないか？と思ったときは、サーバから情報が配信されていない可能性がありますのでページの更新は必要になります。また、情報が配信されていないのはバグとして扱いますので、お気軽にご連絡ください。</p>
      </div>

      <div id="article-footer">
        <a href="./index.html">総合目次</a>
      </div>
    </div>
  </div>
</div>

<footer>
  <div id="footer">
    三国志NET Ver2.7 <a href="http://www3.to/maccyu2/" target="_top">maccyu</a><br>
    三国志NET KMY Version (since 2006.8.21)<br>
    Administered by 雪あすか(KMY) <a href="https://twitter.com/kmysangoku">公式Twitter</a> / <a href="https://twitter.com/askyq">緊急連絡先</a>
  </div>
</footer>

</body>
</html>
